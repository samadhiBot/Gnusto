{"identifier":{"url":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/onEnter(result:)","interfaceLanguage":"swift"},"hierarchy":{"paths":[["doc:\/\/GnustoEngine\/documentation\/GnustoEngine"]]},"metadata":{"symbolKind":"func","title":"onEnter(result:)","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"onEnter","kind":"identifier"},{"text":"(","kind":"text"},{"text":"result","kind":"externalParam"},{"text":": (","kind":"text"},{"text":"LocationEventContext","kind":"typeIdentifier","preciseIdentifier":"s:12GnustoEngine20LocationEventContextV"},{"text":") ","kind":"text"},{"text":"async","kind":"keyword"},{"text":" ","kind":"text"},{"text":"throws","kind":"keyword"},{"text":" -> ","kind":"text"},{"text":"ActionResult","kind":"typeIdentifier","preciseIdentifier":"s:12GnustoEngine12ActionResultV"},{"text":"?) -> ","kind":"text"},{"text":"LocationEventMatcher","kind":"typeIdentifier","preciseIdentifier":"s:12GnustoEngine20LocationEventMatchera"}],"externalID":"s:12GnustoEngine7onEnter6resultAA12ActionResultVSgAA20LocationEventContextVYaKcAfHYaKc_tF","roleHeading":"Function","modules":[{"name":"GnustoEngine"}],"role":"symbol"},"sections":[],"variants":[{"paths":["\/documentation\/gnustoengine\/onenter(result:)"],"traits":[{"interfaceLanguage":"swift"}]}],"abstract":[{"type":"text","text":"Creates a location event matcher for "},{"type":"strong","inlineContent":[{"text":"onEnter","type":"text"}]},{"type":"text","text":" events."}],"primaryContentSections":[{"kind":"declarations","declarations":[{"languages":["swift"],"tokens":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"onEnter"},{"kind":"text","text":"("},{"kind":"externalParam","text":"result"},{"kind":"text","text":": "},{"kind":"attribute","text":"@escaping "},{"kind":"text","text":"("},{"identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/LocationEventContext","kind":"typeIdentifier","text":"LocationEventContext","preciseIdentifier":"s:12GnustoEngine20LocationEventContextV"},{"kind":"text","text":") "},{"kind":"keyword","text":"async"},{"kind":"text","text":" "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> "},{"identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/ActionResult","kind":"typeIdentifier","text":"ActionResult","preciseIdentifier":"s:12GnustoEngine12ActionResultV"},{"kind":"text","text":"?) -> "},{"identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/LocationEventMatcher","kind":"typeIdentifier","text":"LocationEventMatcher","preciseIdentifier":"s:12GnustoEngine20LocationEventMatchera"}],"platforms":["macOS"]}]},{"kind":"parameters","parameters":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The closure to execute for onEnter events, receiving only the context"},{"type":"text","text":" "},{"type":"text","text":"(no command, since this isn’t tied to a specific player command)"}]}],"name":"result"}]},{"kind":"content","content":[{"type":"heading","anchor":"return-value","level":2,"text":"Return Value"},{"type":"paragraph","inlineContent":[{"text":"A LocationEventMatcher that can be used in the result builder","type":"text"}]}]},{"kind":"content","content":[{"text":"Discussion","type":"heading","anchor":"discussion","level":2},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"Timing","type":"text"}]},{"type":"text","text":": Called only when the player moves into this location (not every turn)."},{"type":"text","text":" "},{"type":"strong","inlineContent":[{"text":"Purpose","type":"text"}]},{"type":"text","text":": Handle one-time events that occur when arriving at a location."},{"type":"text","text":" "},{"type":"strong","inlineContent":[{"text":"Can Block Actions","type":"text"}]},{"type":"text","text":": No - the movement already happened, this is just for arrival effects."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"This is the only location event that truly relates to “entering” - it fires during the"},{"type":"text","text":" "},{"type":"text","text":"movement detection phase after successful location changes."}]},{"type":"paragraph","inlineContent":[{"text":"Example:","type":"text"}]},{"code":["onEnter { context in","    \/\/ One-time trap that triggers when first entering","    if !await context.engine.hasFlag(.cellarTrapTriggered) {","        return ActionResult(","            \"The trap door crashes shut, and you hear someone barring it!\",","            context.engine.setFlag(.cellarTrapTriggered),","            context.item(.trapDoor).clearFlag(.isOpen)","        )","    }","    return nil","}","","onEnter { context in","    \/\/ NPC greeting when entering their domain","    ActionResult(\"The wizard looks up from his spellbook and nods at you.\")","}"],"type":"codeListing","syntax":"swift"}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"kind":"symbol","references":{"doc://GnustoEngine/documentation/GnustoEngine/onEnter(result:)":{"role":"symbol","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"onEnter"},{"kind":"text","text":"("},{"kind":"externalParam","text":"result"},{"kind":"text","text":": ("},{"preciseIdentifier":"s:12GnustoEngine20LocationEventContextV","kind":"typeIdentifier","text":"LocationEventContext"},{"kind":"text","text":") "},{"kind":"keyword","text":"async"},{"kind":"text","text":" "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> "},{"preciseIdentifier":"s:12GnustoEngine12ActionResultV","kind":"typeIdentifier","text":"ActionResult"},{"kind":"text","text":"?) -> "},{"preciseIdentifier":"s:12GnustoEngine20LocationEventMatchera","kind":"typeIdentifier","text":"LocationEventMatcher"}],"kind":"symbol","type":"topic","title":"onEnter(result:)","abstract":[{"text":"Creates a location event matcher for ","type":"text"},{"type":"strong","inlineContent":[{"text":"onEnter","type":"text"}]},{"text":" events.","type":"text"}],"url":"\/documentation\/gnustoengine\/onenter(result:)","identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/onEnter(result:)"},"doc://GnustoEngine/documentation/GnustoEngine":{"abstract":[],"kind":"symbol","role":"collection","url":"\/documentation\/gnustoengine","title":"GnustoEngine","identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine","type":"topic"},"doc://GnustoEngine/documentation/GnustoEngine/ActionResult":{"type":"topic","role":"symbol","navigatorTitle":[{"kind":"identifier","text":"ActionResult"}],"title":"ActionResult","url":"\/documentation\/gnustoengine\/actionresult","abstract":[{"type":"text","text":"Represents the outcome of an "},{"code":"ActionHandler","type":"codeVoice"},{"type":"text","text":"’s "},{"code":"process","type":"codeVoice"},{"type":"text","text":" method."}],"fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"ActionResult"}],"identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/ActionResult","kind":"symbol"},"doc://GnustoEngine/documentation/GnustoEngine/LocationEventMatcher":{"abstract":[{"text":"A type alias for context-aware location event matcher functions.","type":"text"}],"identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/LocationEventMatcher","title":"LocationEventMatcher","role":"symbol","navigatorTitle":[{"text":"LocationEventMatcher","kind":"identifier"}],"fragments":[{"text":"typealias","kind":"keyword"},{"text":" ","kind":"text"},{"text":"LocationEventMatcher","kind":"identifier"}],"kind":"symbol","url":"\/documentation\/gnustoengine\/locationeventmatcher","type":"topic"},"doc://GnustoEngine/documentation/GnustoEngine/LocationEventContext":{"identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/LocationEventContext","url":"\/documentation\/gnustoengine\/locationeventcontext","title":"LocationEventContext","kind":"symbol","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"LocationEventContext","kind":"identifier"}],"navigatorTitle":[{"text":"LocationEventContext","kind":"identifier"}],"type":"topic","role":"symbol","abstract":[{"type":"text","text":"Context object passed to location event handler functions containing the event, subject location, and engine."}]}}}