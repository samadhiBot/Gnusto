{"hierarchy":{"paths":[["doc:\/\/GnustoEngine\/documentation\/GnustoEngine"]]},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/gnustoengine\/onenter(result:)"]}],"sections":[],"abstract":[{"type":"text","text":"Creates a location event matcher for "},{"type":"strong","inlineContent":[{"text":"onEnter","type":"text"}]},{"type":"text","text":" events."}],"identifier":{"url":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/onEnter(result:)","interfaceLanguage":"swift"},"primaryContentSections":[{"kind":"declarations","declarations":[{"languages":["swift"],"platforms":["macOS"],"tokens":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"onEnter","kind":"identifier"},{"text":"(","kind":"text"},{"text":"result","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"@escaping ","kind":"attribute"},{"text":"(","kind":"text"},{"text":"LocationEventContext","kind":"typeIdentifier","identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/LocationEventContext","preciseIdentifier":"s:12GnustoEngine20LocationEventContextV"},{"text":") ","kind":"text"},{"text":"async","kind":"keyword"},{"text":" ","kind":"text"},{"text":"throws","kind":"keyword"},{"text":" -> ","kind":"text"},{"text":"ActionResult","kind":"typeIdentifier","identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/ActionResult","preciseIdentifier":"s:12GnustoEngine12ActionResultV"},{"text":"?) -> ","kind":"text"},{"text":"LocationEventMatcher","kind":"typeIdentifier","identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/LocationEventMatcher","preciseIdentifier":"s:12GnustoEngine20LocationEventMatchera"}]}]},{"kind":"parameters","parameters":[{"name":"result","content":[{"type":"paragraph","inlineContent":[{"text":"The closure to execute for onEnter events, receiving only the context","type":"text"},{"text":" ","type":"text"},{"text":"(no command, since this isn’t tied to a specific player command)","type":"text"}]}]}]},{"content":[{"level":2,"text":"Return Value","type":"heading","anchor":"return-value"},{"type":"paragraph","inlineContent":[{"text":"A LocationEventMatcher that can be used in the result builder","type":"text"}]}],"kind":"content"},{"content":[{"type":"heading","level":2,"text":"Discussion","anchor":"discussion"},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"Timing","type":"text"}]},{"text":": Called only when the player moves into this location (not every turn).","type":"text"},{"text":" ","type":"text"},{"type":"strong","inlineContent":[{"type":"text","text":"Purpose"}]},{"text":": Handle one-time events that occur when arriving at a location.","type":"text"},{"text":" ","type":"text"},{"type":"strong","inlineContent":[{"text":"Can Block Actions","type":"text"}]},{"text":": No - the movement already happened, this is just for arrival effects.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"This is the only location event that truly relates to “entering” - it fires during the"},{"type":"text","text":" "},{"type":"text","text":"movement detection phase after successful location changes."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Example:"}]},{"type":"codeListing","code":["onEnter { context in","    \/\/ One-time trap that triggers when first entering","    if !await context.engine.hasFlag(.cellarTrapTriggered) {","        return ActionResult(","            \"The trap door crashes shut, and you hear someone barring it!\",","            context.engine.setFlag(.cellarTrapTriggered),","            context.item(.trapDoor).clearFlag(.isOpen)","        )","    }","    return nil","}","","onEnter { context in","    \/\/ NPC greeting when entering their domain","    ActionResult(\"The wizard looks up from his spellbook and nods at you.\")","}"],"syntax":"swift"}],"kind":"content"}],"kind":"symbol","schemaVersion":{"major":0,"minor":3,"patch":0},"metadata":{"roleHeading":"Function","title":"onEnter(result:)","symbolKind":"func","role":"symbol","externalID":"s:12GnustoEngine7onEnter6resultAA12ActionResultVSgAA20LocationEventContextVYaKcAfHYaKc_tF","modules":[{"name":"GnustoEngine"}],"fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"onEnter"},{"kind":"text","text":"("},{"kind":"externalParam","text":"result"},{"kind":"text","text":": ("},{"kind":"typeIdentifier","preciseIdentifier":"s:12GnustoEngine20LocationEventContextV","text":"LocationEventContext"},{"kind":"text","text":") "},{"kind":"keyword","text":"async"},{"kind":"text","text":" "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","preciseIdentifier":"s:12GnustoEngine12ActionResultV","text":"ActionResult"},{"kind":"text","text":"?) -> "},{"kind":"typeIdentifier","preciseIdentifier":"s:12GnustoEngine20LocationEventMatchera","text":"LocationEventMatcher"}]},"references":{"doc://GnustoEngine/documentation/GnustoEngine/ActionResult":{"url":"\/documentation\/gnustoengine\/actionresult","type":"topic","role":"symbol","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"ActionResult"}],"identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/ActionResult","navigatorTitle":[{"kind":"identifier","text":"ActionResult"}],"title":"ActionResult","kind":"symbol","abstract":[{"text":"Represents the outcome of an ","type":"text"},{"code":"ActionHandler","type":"codeVoice"},{"text":"’s ","type":"text"},{"code":"process","type":"codeVoice"},{"text":" method.","type":"text"}]},"doc://GnustoEngine/documentation/GnustoEngine/onEnter(result:)":{"role":"symbol","title":"onEnter(result:)","kind":"symbol","identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/onEnter(result:)","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"onEnter","kind":"identifier"},{"text":"(","kind":"text"},{"text":"result","kind":"externalParam"},{"text":": (","kind":"text"},{"text":"LocationEventContext","preciseIdentifier":"s:12GnustoEngine20LocationEventContextV","kind":"typeIdentifier"},{"text":") ","kind":"text"},{"text":"async","kind":"keyword"},{"text":" ","kind":"text"},{"text":"throws","kind":"keyword"},{"text":" -> ","kind":"text"},{"text":"ActionResult","preciseIdentifier":"s:12GnustoEngine12ActionResultV","kind":"typeIdentifier"},{"text":"?) -> ","kind":"text"},{"text":"LocationEventMatcher","preciseIdentifier":"s:12GnustoEngine20LocationEventMatchera","kind":"typeIdentifier"}],"abstract":[{"text":"Creates a location event matcher for ","type":"text"},{"inlineContent":[{"text":"onEnter","type":"text"}],"type":"strong"},{"text":" events.","type":"text"}],"type":"topic","url":"\/documentation\/gnustoengine\/onenter(result:)"},"doc://GnustoEngine/documentation/GnustoEngine/LocationEventContext":{"abstract":[{"type":"text","text":"Context object passed to location event handler functions containing the event, subject location, and engine."}],"url":"\/documentation\/gnustoengine\/locationeventcontext","kind":"symbol","role":"symbol","type":"topic","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"LocationEventContext"}],"identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/LocationEventContext","title":"LocationEventContext","navigatorTitle":[{"kind":"identifier","text":"LocationEventContext"}]},"doc://GnustoEngine/documentation/GnustoEngine":{"role":"collection","identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine","kind":"symbol","title":"GnustoEngine","abstract":[],"url":"\/documentation\/gnustoengine","type":"topic"},"doc://GnustoEngine/documentation/GnustoEngine/LocationEventMatcher":{"role":"symbol","type":"topic","identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/LocationEventMatcher","navigatorTitle":[{"text":"LocationEventMatcher","kind":"identifier"}],"kind":"symbol","fragments":[{"text":"typealias","kind":"keyword"},{"text":" ","kind":"text"},{"text":"LocationEventMatcher","kind":"identifier"}],"title":"LocationEventMatcher","abstract":[{"text":"A type alias for context-aware location event matcher functions.","type":"text"}],"url":"\/documentation\/gnustoengine\/locationeventmatcher"}}}