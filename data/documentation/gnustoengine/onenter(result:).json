{"schemaVersion":{"major":0,"minor":3,"patch":0},"metadata":{"modules":[{"name":"GnustoEngine"}],"role":"symbol","externalID":"s:12GnustoEngine7onEnter6resultAA12ActionResultVSgAA20LocationEventContextVYaKcAfHYaKc_tF","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"onEnter"},{"kind":"text","text":"("},{"kind":"externalParam","text":"result"},{"kind":"text","text":": ("},{"kind":"typeIdentifier","text":"LocationEventContext","preciseIdentifier":"s:12GnustoEngine20LocationEventContextV"},{"kind":"text","text":") "},{"kind":"keyword","text":"async"},{"kind":"text","text":" "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","text":"ActionResult","preciseIdentifier":"s:12GnustoEngine12ActionResultV"},{"kind":"text","text":"?) -> "},{"kind":"typeIdentifier","text":"LocationEventMatcher","preciseIdentifier":"s:12GnustoEngine20LocationEventMatchera"}],"symbolKind":"func","title":"onEnter(result:)","roleHeading":"Function"},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/gnustoengine\/onenter(result:)"]}],"identifier":{"url":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/onEnter(result:)","interfaceLanguage":"swift"},"primaryContentSections":[{"declarations":[{"languages":["swift"],"tokens":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"onEnter"},{"kind":"text","text":"("},{"kind":"externalParam","text":"result"},{"kind":"text","text":": "},{"kind":"attribute","text":"@escaping "},{"kind":"text","text":"("},{"kind":"typeIdentifier","identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/LocationEventContext","preciseIdentifier":"s:12GnustoEngine20LocationEventContextV","text":"LocationEventContext"},{"kind":"text","text":") "},{"kind":"keyword","text":"async"},{"kind":"text","text":" "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/ActionResult","preciseIdentifier":"s:12GnustoEngine12ActionResultV","text":"ActionResult"},{"kind":"text","text":"?) -> "},{"kind":"typeIdentifier","identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/LocationEventMatcher","preciseIdentifier":"s:12GnustoEngine20LocationEventMatchera","text":"LocationEventMatcher"}],"platforms":["macOS"]}],"kind":"declarations"},{"kind":"parameters","parameters":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The closure to execute for onEnter events, receiving only the context"},{"type":"text","text":" "},{"type":"text","text":"(no command, since this isn’t tied to a specific player command)"}]}],"name":"result"}]},{"content":[{"level":2,"text":"Return Value","type":"heading","anchor":"return-value"},{"type":"paragraph","inlineContent":[{"type":"text","text":"A LocationEventMatcher that can be used in the result builder"}]}],"kind":"content"},{"content":[{"level":2,"text":"Discussion","type":"heading","anchor":"discussion"},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"Timing","type":"text"}]},{"type":"text","text":": Called only when the player moves into this location (not every turn)."},{"type":"text","text":" "},{"type":"strong","inlineContent":[{"text":"Purpose","type":"text"}]},{"type":"text","text":": Handle one-time events that occur when arriving at a location."},{"type":"text","text":" "},{"type":"strong","inlineContent":[{"type":"text","text":"Can Block Actions"}]},{"type":"text","text":": No - the movement already happened, this is just for arrival effects."}]},{"type":"paragraph","inlineContent":[{"text":"This is the only location event that truly relates to “entering” - it fires during the","type":"text"},{"text":" ","type":"text"},{"text":"movement detection phase after successful location changes.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Example:"}]},{"syntax":"swift","type":"codeListing","code":["onEnter { context in","    \/\/ One-time trap that triggers when first entering","    if !await context.engine.hasFlag(.cellarTrapTriggered) {","        return ActionResult(","            \"The trap door crashes shut, and you hear someone barring it!\",","            context.engine.setFlag(.cellarTrapTriggered),","            context.item(.trapDoor).clearFlag(.isOpen)","        )","    }","    return nil","}","","onEnter { context in","    \/\/ NPC greeting when entering their domain","    ActionResult(\"The wizard looks up from his spellbook and nods at you.\")","}"]}],"kind":"content"}],"hierarchy":{"paths":[["doc:\/\/GnustoEngine\/documentation\/GnustoEngine"]]},"sections":[],"abstract":[{"text":"Creates a location event matcher for ","type":"text"},{"type":"strong","inlineContent":[{"text":"onEnter","type":"text"}]},{"text":" events.","type":"text"}],"kind":"symbol","references":{"doc://GnustoEngine/documentation/GnustoEngine/ActionResult":{"navigatorTitle":[{"text":"ActionResult","kind":"identifier"}],"kind":"symbol","abstract":[{"text":"Represents the outcome of an ","type":"text"},{"code":"ActionHandler","type":"codeVoice"},{"text":"’s ","type":"text"},{"code":"process","type":"codeVoice"},{"text":" method.","type":"text"}],"title":"ActionResult","identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/ActionResult","url":"\/documentation\/gnustoengine\/actionresult","role":"symbol","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"ActionResult","kind":"identifier"}],"type":"topic"},"doc://GnustoEngine/documentation/GnustoEngine/onEnter(result:)":{"identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/onEnter(result:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"onEnter"},{"kind":"text","text":"("},{"kind":"externalParam","text":"result"},{"kind":"text","text":": ("},{"preciseIdentifier":"s:12GnustoEngine20LocationEventContextV","kind":"typeIdentifier","text":"LocationEventContext"},{"kind":"text","text":") "},{"kind":"keyword","text":"async"},{"kind":"text","text":" "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> "},{"preciseIdentifier":"s:12GnustoEngine12ActionResultV","kind":"typeIdentifier","text":"ActionResult"},{"kind":"text","text":"?) -> "},{"preciseIdentifier":"s:12GnustoEngine20LocationEventMatchera","kind":"typeIdentifier","text":"LocationEventMatcher"}],"title":"onEnter(result:)","abstract":[{"type":"text","text":"Creates a location event matcher for "},{"type":"strong","inlineContent":[{"type":"text","text":"onEnter"}]},{"type":"text","text":" events."}],"role":"symbol","kind":"symbol","type":"topic","url":"\/documentation\/gnustoengine\/onenter(result:)"},"doc://GnustoEngine/documentation/GnustoEngine/LocationEventMatcher":{"navigatorTitle":[{"kind":"identifier","text":"LocationEventMatcher"}],"kind":"symbol","url":"\/documentation\/gnustoengine\/locationeventmatcher","identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/LocationEventMatcher","type":"topic","title":"LocationEventMatcher","abstract":[{"text":"A type alias for context-aware location event matcher functions.","type":"text"}],"role":"symbol","fragments":[{"kind":"keyword","text":"typealias"},{"kind":"text","text":" "},{"kind":"identifier","text":"LocationEventMatcher"}]},"doc://GnustoEngine/documentation/GnustoEngine/LocationEventContext":{"kind":"symbol","url":"\/documentation\/gnustoengine\/locationeventcontext","role":"symbol","abstract":[{"text":"Context object passed to location event handler functions containing the event, subject location, and engine.","type":"text"}],"title":"LocationEventContext","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"LocationEventContext","kind":"identifier"}],"navigatorTitle":[{"text":"LocationEventContext","kind":"identifier"}],"type":"topic","identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/LocationEventContext"},"doc://GnustoEngine/documentation/GnustoEngine":{"role":"collection","abstract":[],"type":"topic","kind":"symbol","identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine","url":"\/documentation\/gnustoengine","title":"GnustoEngine"}}}