{"metadata":{"role":"symbol","title":"onEnter(result:)","externalID":"s:12GnustoEngine7onEnter6resultAA12ActionResultVSgAA20LocationEventContextVYaKcAfHYaKc_tF","roleHeading":"Function","modules":[{"name":"GnustoEngine"}],"symbolKind":"func","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"onEnter","kind":"identifier"},{"text":"(","kind":"text"},{"text":"result","kind":"externalParam"},{"text":": (","kind":"text"},{"text":"LocationEventContext","preciseIdentifier":"s:12GnustoEngine20LocationEventContextV","kind":"typeIdentifier"},{"text":") ","kind":"text"},{"text":"async","kind":"keyword"},{"text":" ","kind":"text"},{"text":"throws","kind":"keyword"},{"text":" -> ","kind":"text"},{"text":"ActionResult","preciseIdentifier":"s:12GnustoEngine12ActionResultV","kind":"typeIdentifier"},{"text":"?) -> ","kind":"text"},{"text":"LocationEventMatcher","preciseIdentifier":"s:12GnustoEngine20LocationEventMatchera","kind":"typeIdentifier"}]},"schemaVersion":{"major":0,"minor":3,"patch":0},"abstract":[{"text":"Creates a location event matcher for ","type":"text"},{"inlineContent":[{"text":"onEnter","type":"text"}],"type":"strong"},{"text":" events.","type":"text"}],"sections":[],"primaryContentSections":[{"kind":"declarations","declarations":[{"platforms":["macOS"],"languages":["swift"],"tokens":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"onEnter"},{"kind":"text","text":"("},{"kind":"externalParam","text":"result"},{"kind":"text","text":": "},{"kind":"keyword","text":"@escaping"},{"kind":"text","text":" ("},{"kind":"typeIdentifier","text":"LocationEventContext","preciseIdentifier":"s:12GnustoEngine20LocationEventContextV","identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/LocationEventContext"},{"kind":"text","text":") "},{"kind":"keyword","text":"async"},{"kind":"text","text":" "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","preciseIdentifier":"s:12GnustoEngine12ActionResultV","identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/ActionResult","text":"ActionResult"},{"kind":"text","text":"?) -> "},{"kind":"typeIdentifier","preciseIdentifier":"s:12GnustoEngine20LocationEventMatchera","identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/LocationEventMatcher","text":"LocationEventMatcher"}]}]},{"parameters":[{"name":"result","content":[{"inlineContent":[{"type":"text","text":"The closure to execute for onEnter events, receiving only the context"},{"type":"text","text":" "},{"type":"text","text":"(no command, since this isn’t tied to a specific player command)"}],"type":"paragraph"}]}],"kind":"parameters"},{"kind":"content","content":[{"type":"heading","text":"Return Value","anchor":"return-value","level":2},{"type":"paragraph","inlineContent":[{"text":"A LocationEventMatcher that can be used in the result builder","type":"text"}]}]},{"kind":"content","content":[{"text":"Discussion","anchor":"discussion","level":2,"type":"heading"},{"inlineContent":[{"inlineContent":[{"type":"text","text":"Timing"}],"type":"strong"},{"type":"text","text":": Called only when the player moves into this location (not every turn)."},{"type":"text","text":" "},{"inlineContent":[{"type":"text","text":"Purpose"}],"type":"strong"},{"type":"text","text":": Handle one-time events that occur when arriving at a location."},{"type":"text","text":" "},{"inlineContent":[{"type":"text","text":"Can Block Actions"}],"type":"strong"},{"type":"text","text":": No - the movement already happened, this is just for arrival effects."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"This is the only location event that truly relates to “entering” - it fires during the"},{"type":"text","text":" "},{"type":"text","text":"movement detection phase after successful location changes."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Example:"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["onEnter { context in","    \/\/ One-time trap that triggers when first entering","    if !await context.engine.hasFlag(.cellarTrapTriggered) {","        return ActionResult(","            \"The trap door crashes shut, and you hear someone barring it!\",","            context.engine.setFlag(.cellarTrapTriggered),","            context.engine.item(.trapDoor).clearFlag(.isOpen)","        )","    }","    return nil","}","","onEnter { context in","    \/\/ NPC greeting when entering their domain","    ActionResult(\"The wizard looks up from his spellbook and nods at you.\")","}"]}]}],"variants":[{"paths":["\/documentation\/gnustoengine\/onenter(result:)"],"traits":[{"interfaceLanguage":"swift"}]}],"kind":"symbol","hierarchy":{"paths":[["doc:\/\/GnustoEngine\/documentation\/GnustoEngine"]]},"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/onEnter(result:)"},"references":{"doc://GnustoEngine/documentation/GnustoEngine/LocationEventContext":{"role":"symbol","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"LocationEventContext"}],"abstract":[{"type":"text","text":"Context object passed to location event handler functions containing the event, subject location, and engine."}],"type":"topic","title":"LocationEventContext","kind":"symbol","identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/LocationEventContext","url":"\/documentation\/gnustoengine\/locationeventcontext","navigatorTitle":[{"kind":"identifier","text":"LocationEventContext"}]},"doc://GnustoEngine/documentation/GnustoEngine/onEnter(result:)":{"title":"onEnter(result:)","url":"\/documentation\/gnustoengine\/onenter(result:)","identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/onEnter(result:)","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"onEnter","kind":"identifier"},{"text":"(","kind":"text"},{"text":"result","kind":"externalParam"},{"text":": (","kind":"text"},{"text":"LocationEventContext","kind":"typeIdentifier","preciseIdentifier":"s:12GnustoEngine20LocationEventContextV"},{"text":") ","kind":"text"},{"text":"async","kind":"keyword"},{"text":" ","kind":"text"},{"text":"throws","kind":"keyword"},{"text":" -> ","kind":"text"},{"text":"ActionResult","kind":"typeIdentifier","preciseIdentifier":"s:12GnustoEngine12ActionResultV"},{"text":"?) -> ","kind":"text"},{"text":"LocationEventMatcher","kind":"typeIdentifier","preciseIdentifier":"s:12GnustoEngine20LocationEventMatchera"}],"abstract":[{"text":"Creates a location event matcher for ","type":"text"},{"inlineContent":[{"type":"text","text":"onEnter"}],"type":"strong"},{"text":" events.","type":"text"}],"role":"symbol","kind":"symbol","type":"topic"},"doc://GnustoEngine/documentation/GnustoEngine/LocationEventMatcher":{"navigatorTitle":[{"text":"LocationEventMatcher","kind":"identifier"}],"title":"LocationEventMatcher","abstract":[{"type":"text","text":"A type alias for context-aware location event matcher functions."}],"role":"symbol","url":"\/documentation\/gnustoengine\/locationeventmatcher","fragments":[{"text":"typealias","kind":"keyword"},{"text":" ","kind":"text"},{"text":"LocationEventMatcher","kind":"identifier"}],"identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/LocationEventMatcher","kind":"symbol","type":"topic"},"doc://GnustoEngine/documentation/GnustoEngine":{"type":"topic","url":"\/documentation\/gnustoengine","abstract":[],"kind":"symbol","identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine","title":"GnustoEngine","role":"collection"},"doc://GnustoEngine/documentation/GnustoEngine/ActionResult":{"type":"topic","identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/ActionResult","title":"ActionResult","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"ActionResult"}],"abstract":[{"text":"Represents the outcome of an ","type":"text"},{"code":"ActionHandler","type":"codeVoice"},{"text":"’s ","type":"text"},{"code":"process","type":"codeVoice"},{"text":" method.","type":"text"}],"kind":"symbol","role":"symbol","url":"\/documentation\/gnustoengine\/actionresult","navigatorTitle":[{"kind":"identifier","text":"ActionResult"}]}}}