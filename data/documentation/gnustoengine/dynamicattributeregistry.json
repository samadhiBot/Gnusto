{"primaryContentSections":[{"declarations":[{"languages":["swift"],"platforms":["macOS"],"tokens":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"DynamicAttributeRegistry"}]}],"kind":"declarations"},{"content":[{"level":2,"type":"heading","text":"Overview","anchor":"overview"},{"inlineContent":[{"text":"This registry allows game developers to define custom behavior for specific items and locations","type":"text"},{"text":" ","type":"text"},{"text":"beyond simple static values stored in ","type":"text"},{"code":"Item.attributes","type":"codeVoice"},{"type":"text","text":" or "},{"code":"Location.attributes","type":"codeVoice"},{"type":"text","text":". It separates"},{"type":"text","text":" "},{"text":"the behavioral aspects of attributes from their direct state storage.","type":"text"}],"type":"paragraph"},{"level":3,"anchor":"Use-Cases","type":"heading","text":"Use Cases:"},{"items":[{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Computed Attributes:"}]},{"text":" Define attributes whose values are calculated on the fly based on","type":"text"},{"type":"text","text":" "},{"text":"other game state. For example:","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"A magic sword’s "},{"type":"codeVoice","code":"description"},{"type":"text","text":" that changes based on its enchantment level."}]}]},{"content":[{"inlineContent":[{"type":"text","text":"A weather vane’s "},{"code":"direction","type":"codeVoice"},{"text":" that reflects current wind conditions.","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"An NPC’s ","type":"text"},{"code":"mood","type":"codeVoice"},{"type":"text","text":" attribute that changes based on player actions or game events."}]}]}],"type":"unorderedList"}]},{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"Validated Attributes:"}],"type":"strong"},{"type":"text","text":" Define rules that must be met when attempting to change an"},{"type":"text","text":" "},{"text":"attribute’s value. For example:","type":"text"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Preventing a player’s "},{"code":"strength","type":"codeVoice"},{"type":"text","text":" attribute from exceeding a maximum value."}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Ensuring a "},{"type":"codeVoice","code":"doorState"},{"text":" attribute can only transition between valid states.","type":"text"}],"type":"paragraph"}]}]}]}],"type":"unorderedList"},{"inlineContent":[{"type":"text","text":"Game developers register these custom handlers (closures) with the "},{"code":"DynamicAttributeRegistry","type":"codeVoice"},{"text":",","type":"text"},{"text":" ","type":"text"},{"text":"typically during game setup via the ","type":"text"},{"code":"GameBlueprint","type":"codeVoice"},{"text":". The ","type":"text"},{"type":"codeVoice","code":"GameEngine"},{"type":"text","text":" then automatically"},{"type":"text","text":" "},{"type":"text","text":"invokes these handlers when relevant attributes are accessed or modified."}],"type":"paragraph"},{"level":3,"anchor":"Registration-Pattern","text":"Registration Pattern:","type":"heading"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Instead of registering by attribute type (which leads to large switch statements), this registry"},{"type":"text","text":" "},{"type":"text","text":"uses "},{"type":"strong","inlineContent":[{"type":"text","text":"item-specific"}]},{"type":"text","text":" and "},{"type":"strong","inlineContent":[{"type":"text","text":"location-specific"}]},{"type":"text","text":" registration for better separation of concerns:"}]},{"syntax":"swift","code":["\/\/ Register dynamic description for a specific magic sword","registry.registerItemCompute(itemID: \"magicSword\", attributeID: \"description\") { item, gameState in","    let enchantmentLevel = item.attributes[\"enchantmentLevel\"]?.toInt ?? 0","    return .string(\"A \\(enchantmentLevel > 5 ? \"brilliantly glowing\" : \"faintly shimmering\") sword.\")","}","","\/\/ Register dynamic mood for a specific NPC","registry.registerItemCompute(itemID: \"villageElder\", attributeID: \"mood\") { item, gameState in","    let playerReputation = gameState.globalState[\"playerReputation\"]?.toInt ?? 0","    return .string(playerReputation > 50 ? \"friendly\" : \"suspicious\")","}"],"type":"codeListing"}],"kind":"content"}],"topicSections":[{"generated":true,"title":"Initializers","anchor":"Initializers","identifiers":["doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/DynamicAttributeRegistry\/init()"]},{"identifiers":["doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/DynamicAttributeRegistry\/registerItemCompute(itemID:attributeID:handler:)","doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/DynamicAttributeRegistry\/registerItemValidate(itemID:attributeID:handler:)","doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/DynamicAttributeRegistry\/registerLocationCompute(locationID:attributeID:handler:)","doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/DynamicAttributeRegistry\/registerLocationValidate(locationID:attributeID:handler:)"],"anchor":"Instance-Methods","title":"Instance Methods","generated":true},{"generated":true,"identifiers":["doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/DynamicAttributeRegistry\/ItemComputeHandler","doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/DynamicAttributeRegistry\/ItemValidateHandler","doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/DynamicAttributeRegistry\/LocationComputeHandler","doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/DynamicAttributeRegistry\/LocationValidateHandler"],"anchor":"Type-Aliases","title":"Type Aliases"}],"schemaVersion":{"major":0,"minor":3,"patch":0},"hierarchy":{"paths":[["doc:\/\/GnustoEngine\/documentation\/GnustoEngine"]]},"relationshipsSections":[{"type":"conformsTo","title":"Conforms To","identifiers":["doc:\/\/GnustoEngine\/s8SendableP"],"kind":"relationships"}],"kind":"symbol","metadata":{"externalID":"s:12GnustoEngine24DynamicAttributeRegistryV","title":"DynamicAttributeRegistry","modules":[{"name":"GnustoEngine"}],"role":"symbol","fragments":[{"kind":"keyword","text":"struct"},{"text":" ","kind":"text"},{"kind":"identifier","text":"DynamicAttributeRegistry"}],"navigatorTitle":[{"kind":"identifier","text":"DynamicAttributeRegistry"}],"roleHeading":"Structure","symbolKind":"struct"},"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/DynamicAttributeRegistry"},"sections":[],"abstract":[{"type":"text","text":"A registry to hold dynamically computed logic (getters) and validation rules (setters\/validators)"},{"type":"text","text":" "},{"type":"text","text":"for item and location attributes."}],"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/gnustoengine\/dynamicattributeregistry"]}],"references":{"doc://GnustoEngine/documentation/GnustoEngine/DynamicAttributeRegistry/registerItemCompute(itemID:attributeID:handler:)":{"title":"registerItemCompute(itemID:attributeID:handler:)","abstract":[{"text":"Registers a compute handler (a dynamic getter) for a specific item’s attribute.","type":"text"}],"kind":"symbol","type":"topic","url":"\/documentation\/gnustoengine\/dynamicattributeregistry\/registeritemcompute(itemid:attributeid:handler:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"text":"registerItemCompute","kind":"identifier"},{"kind":"text","text":"("},{"kind":"externalParam","text":"itemID"},{"text":": ","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:12GnustoEngine6ItemIDV","text":"ItemID"},{"text":", ","kind":"text"},{"kind":"externalParam","text":"attributeID"},{"kind":"text","text":": "},{"text":"AttributeID","kind":"typeIdentifier","preciseIdentifier":"s:12GnustoEngine11AttributeIDV"},{"kind":"text","text":", "},{"text":"handler","kind":"externalParam"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"DynamicAttributeRegistry","preciseIdentifier":"s:12GnustoEngine24DynamicAttributeRegistryV"},{"kind":"text","text":"."},{"text":"ItemComputeHandler","kind":"typeIdentifier","preciseIdentifier":"s:12GnustoEngine24DynamicAttributeRegistryV18ItemComputeHandlera"},{"kind":"text","text":")"}],"identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/DynamicAttributeRegistry\/registerItemCompute(itemID:attributeID:handler:)","role":"symbol"},"doc://GnustoEngine/documentation/GnustoEngine/DynamicAttributeRegistry/registerLocationValidate(locationID:attributeID:handler:)":{"kind":"symbol","role":"symbol","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"registerLocationValidate","kind":"identifier"},{"kind":"text","text":"("},{"text":"locationID","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"LocationID","kind":"typeIdentifier","preciseIdentifier":"s:12GnustoEngine10LocationIDV"},{"kind":"text","text":", "},{"kind":"externalParam","text":"attributeID"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:12GnustoEngine11AttributeIDV","kind":"typeIdentifier","text":"AttributeID"},{"kind":"text","text":", "},{"text":"handler","kind":"externalParam"},{"text":": ","kind":"text"},{"kind":"typeIdentifier","text":"DynamicAttributeRegistry","preciseIdentifier":"s:12GnustoEngine24DynamicAttributeRegistryV"},{"text":".","kind":"text"},{"kind":"typeIdentifier","text":"LocationValidateHandler","preciseIdentifier":"s:12GnustoEngine24DynamicAttributeRegistryV23LocationValidateHandlera"},{"kind":"text","text":")"}],"type":"topic","url":"\/documentation\/gnustoengine\/dynamicattributeregistry\/registerlocationvalidate(locationid:attributeid:handler:)","title":"registerLocationValidate(locationID:attributeID:handler:)","identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/DynamicAttributeRegistry\/registerLocationValidate(locationID:attributeID:handler:)","abstract":[{"text":"Registers a validation handler for a specific location’s attribute.","type":"text"}]},"doc://GnustoEngine/documentation/GnustoEngine/DynamicAttributeRegistry/LocationValidateHandler":{"role":"symbol","url":"\/documentation\/gnustoengine\/dynamicattributeregistry\/locationvalidatehandler","navigatorTitle":[{"text":"LocationValidateHandler","kind":"identifier"}],"abstract":[{"text":"A closure that validates a proposed new value for a specific location’s attribute.","type":"text"}],"type":"topic","title":"DynamicAttributeRegistry.LocationValidateHandler","identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/DynamicAttributeRegistry\/LocationValidateHandler","kind":"symbol","fragments":[{"text":"typealias","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"LocationValidateHandler"}]},"doc://GnustoEngine/documentation/GnustoEngine/DynamicAttributeRegistry/ItemValidateHandler":{"navigatorTitle":[{"kind":"identifier","text":"ItemValidateHandler"}],"role":"symbol","type":"topic","title":"DynamicAttributeRegistry.ItemValidateHandler","url":"\/documentation\/gnustoengine\/dynamicattributeregistry\/itemvalidatehandler","abstract":[{"type":"text","text":"A closure that validates a proposed new value for a specific item’s attribute before it is set."}],"kind":"symbol","identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/DynamicAttributeRegistry\/ItemValidateHandler","fragments":[{"kind":"keyword","text":"typealias"},{"kind":"text","text":" "},{"kind":"identifier","text":"ItemValidateHandler"}]},"doc://GnustoEngine/documentation/GnustoEngine/DynamicAttributeRegistry/LocationComputeHandler":{"kind":"symbol","role":"symbol","fragments":[{"kind":"keyword","text":"typealias"},{"kind":"text","text":" "},{"kind":"identifier","text":"LocationComputeHandler"}],"type":"topic","url":"\/documentation\/gnustoengine\/dynamicattributeregistry\/locationcomputehandler","title":"DynamicAttributeRegistry.LocationComputeHandler","navigatorTitle":[{"kind":"identifier","text":"LocationComputeHandler"}],"identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/DynamicAttributeRegistry\/LocationComputeHandler","abstract":[{"text":"A closure that dynamically computes the value of a specific location’s attribute.","type":"text"}]},"doc://GnustoEngine/s8SendableP":{"type":"unresolvable","title":"Swift.Sendable","identifier":"doc:\/\/GnustoEngine\/s8SendableP"},"doc://GnustoEngine/documentation/GnustoEngine/DynamicAttributeRegistry":{"role":"symbol","url":"\/documentation\/gnustoengine\/dynamicattributeregistry","navigatorTitle":[{"kind":"identifier","text":"DynamicAttributeRegistry"}],"abstract":[{"text":"A registry to hold dynamically computed logic (getters) and validation rules (setters\/validators)","type":"text"},{"type":"text","text":" "},{"type":"text","text":"for item and location attributes."}],"type":"topic","title":"DynamicAttributeRegistry","identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/DynamicAttributeRegistry","kind":"symbol","fragments":[{"text":"struct","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"DynamicAttributeRegistry"}]},"doc://GnustoEngine/documentation/GnustoEngine/DynamicAttributeRegistry/ItemComputeHandler":{"identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/DynamicAttributeRegistry\/ItemComputeHandler","navigatorTitle":[{"kind":"identifier","text":"ItemComputeHandler"}],"title":"DynamicAttributeRegistry.ItemComputeHandler","abstract":[{"type":"text","text":"A closure that dynamically computes the value of a specific item’s attribute."}],"kind":"symbol","url":"\/documentation\/gnustoengine\/dynamicattributeregistry\/itemcomputehandler","role":"symbol","fragments":[{"kind":"keyword","text":"typealias"},{"text":" ","kind":"text"},{"text":"ItemComputeHandler","kind":"identifier"}],"type":"topic"},"doc://GnustoEngine/documentation/GnustoEngine":{"role":"collection","url":"\/documentation\/gnustoengine","abstract":[],"title":"GnustoEngine","identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine","type":"topic","kind":"symbol"},"doc://GnustoEngine/documentation/GnustoEngine/DynamicAttributeRegistry/registerItemValidate(itemID:attributeID:handler:)":{"fragments":[{"text":"func","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"registerItemValidate"},{"kind":"text","text":"("},{"text":"itemID","kind":"externalParam"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:12GnustoEngine6ItemIDV","text":"ItemID","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"attributeID","kind":"externalParam"},{"text":": ","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:12GnustoEngine11AttributeIDV","text":"AttributeID"},{"kind":"text","text":", "},{"text":"handler","kind":"externalParam"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:12GnustoEngine24DynamicAttributeRegistryV","kind":"typeIdentifier","text":"DynamicAttributeRegistry"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"ItemValidateHandler","preciseIdentifier":"s:12GnustoEngine24DynamicAttributeRegistryV19ItemValidateHandlera"},{"text":")","kind":"text"}],"role":"symbol","title":"registerItemValidate(itemID:attributeID:handler:)","url":"\/documentation\/gnustoengine\/dynamicattributeregistry\/registeritemvalidate(itemid:attributeid:handler:)","abstract":[{"type":"text","text":"Registers a validation handler for a specific item’s attribute."}],"kind":"symbol","identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/DynamicAttributeRegistry\/registerItemValidate(itemID:attributeID:handler:)","type":"topic"},"doc://GnustoEngine/documentation/GnustoEngine/DynamicAttributeRegistry/registerLocationCompute(locationID:attributeID:handler:)":{"abstract":[{"type":"text","text":"Registers a compute handler (a dynamic getter) for a specific location’s attribute."}],"title":"registerLocationCompute(locationID:attributeID:handler:)","role":"symbol","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"registerLocationCompute"},{"kind":"text","text":"("},{"text":"locationID","kind":"externalParam"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"LocationID","preciseIdentifier":"s:12GnustoEngine10LocationIDV"},{"text":", ","kind":"text"},{"text":"attributeID","kind":"externalParam"},{"text":": ","kind":"text"},{"kind":"typeIdentifier","text":"AttributeID","preciseIdentifier":"s:12GnustoEngine11AttributeIDV"},{"text":", ","kind":"text"},{"kind":"externalParam","text":"handler"},{"kind":"text","text":": "},{"preciseIdentifier":"s:12GnustoEngine24DynamicAttributeRegistryV","kind":"typeIdentifier","text":"DynamicAttributeRegistry"},{"text":".","kind":"text"},{"preciseIdentifier":"s:12GnustoEngine24DynamicAttributeRegistryV22LocationComputeHandlera","text":"LocationComputeHandler","kind":"typeIdentifier"},{"kind":"text","text":")"}],"identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/DynamicAttributeRegistry\/registerLocationCompute(locationID:attributeID:handler:)","url":"\/documentation\/gnustoengine\/dynamicattributeregistry\/registerlocationcompute(locationid:attributeid:handler:)","type":"topic","kind":"symbol"},"doc://GnustoEngine/documentation/GnustoEngine/DynamicAttributeRegistry/init()":{"identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/DynamicAttributeRegistry\/init()","url":"\/documentation\/gnustoengine\/dynamicattributeregistry\/init()","kind":"symbol","abstract":[{"text":"Creates a new empty DynamicAttributeRegistry.","type":"text"}],"role":"symbol","type":"topic","title":"init()","fragments":[{"kind":"identifier","text":"init"},{"text":"()","kind":"text"}]}}}