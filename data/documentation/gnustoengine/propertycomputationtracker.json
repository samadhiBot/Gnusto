{"primaryContentSections":[{"declarations":[{"languages":["swift"],"tokens":[{"text":"enum","kind":"keyword"},{"text":" ","kind":"text"},{"text":"PropertyComputationTracker","kind":"identifier"}],"platforms":["macOS"]}],"kind":"declarations"},{"content":[{"level":2,"text":"Overview","anchor":"overview","type":"heading"},{"inlineContent":[{"type":"codeVoice","code":"PropertyComputationTracker"},{"text":" uses Swiftâ€™s ","type":"text"},{"type":"codeVoice","code":"@TaskLocal"},{"text":" storage to track active property","type":"text"},{"text":" ","type":"text"},{"text":"computations. This eliminates the need for explicit begin\/end tracking and async cleanup,","type":"text"},{"text":" ","type":"text"},{"text":"as the task-local storage automatically manages the computation scope.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"The tracker creates unique computation keys for both item and location properties,","type":"text"},{"text":" ","type":"text"},{"text":"allowing unified tracking across the entire computation chain. When a circular","type":"text"},{"text":" ","type":"text"},{"text":"dependency is detected, the system gracefully falls back to static values.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"Example usage:","type":"text"}],"type":"paragraph"},{"code":["\/\/ In ItemProxy.property(_:)","let computationKey = PropertyComputationTracker.key(for: id, property: propertyID)","guard !PropertyComputationTracker.isActive(computationKey) else {","    return staticValue \/\/ Circular dependency - use fallback","}","","return try await PropertyComputationTracker.$activeComputations.withValue(","    PropertyComputationTracker.activeComputations.union([computationKey])",") {","    \/\/ Perform computation within tracked scope","    return try await computer.compute(context)","}"],"syntax":"swift","type":"codeListing"}],"kind":"content"}],"schemaVersion":{"minor":3,"major":0,"patch":0},"hierarchy":{"paths":[["doc:\/\/GnustoEngine\/documentation\/GnustoEngine"]]},"variants":[{"paths":["\/documentation\/gnustoengine\/propertycomputationtracker"],"traits":[{"interfaceLanguage":"swift"}]}],"metadata":{"title":"PropertyComputationTracker","roleHeading":"Enumeration","navigatorTitle":[{"text":"PropertyComputationTracker","kind":"identifier"}],"fragments":[{"text":"enum","kind":"keyword"},{"text":" ","kind":"text"},{"text":"PropertyComputationTracker","kind":"identifier"}],"symbolKind":"enum","modules":[{"name":"GnustoEngine"}],"role":"symbol","externalID":"s:12GnustoEngine26PropertyComputationTrackerO"},"kind":"symbol","identifier":{"url":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/PropertyComputationTracker","interfaceLanguage":"swift"},"abstract":[{"text":"Unified property computation tracking using task-local storage.","type":"text"}],"topicSections":[{"title":"Type Properties","anchor":"Type-Properties","generated":true,"identifiers":["doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/PropertyComputationTracker\/$activeComputations","doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/PropertyComputationTracker\/activeComputations"]},{"title":"Type Methods","anchor":"Type-Methods","generated":true,"identifiers":["doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/PropertyComputationTracker\/isActive(_:)","doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/PropertyComputationTracker\/key(for:property:)-4ltf1","doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/PropertyComputationTracker\/key(for:property:)-88v2h","doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/PropertyComputationTracker\/withTracking(_:perform:)"]}],"sections":[],"references":{"doc://GnustoEngine/documentation/GnustoEngine/PropertyComputationTracker/isActive(_:)":{"title":"isActive(_:)","kind":"symbol","abstract":[{"text":"Checks if a computation is currently active.","type":"text"}],"url":"\/documentation\/gnustoengine\/propertycomputationtracker\/isactive(_:)","type":"topic","identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/PropertyComputationTracker\/isActive(_:)","role":"symbol","fragments":[{"kind":"keyword","text":"static"},{"kind":"text","text":" "},{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"isActive"},{"kind":"text","text":"("},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"}]},"doc://GnustoEngine/documentation/GnustoEngine/PropertyComputationTracker/withTracking(_:perform:)":{"fragments":[{"kind":"keyword","text":"static"},{"kind":"text","text":" "},{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"withTracking"},{"kind":"text","text":"<"},{"kind":"genericParameter","text":"T"},{"kind":"text","text":">("},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":", "},{"kind":"externalParam","text":"perform"},{"kind":"text","text":": () "},{"kind":"keyword","text":"async"},{"kind":"text","text":" "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","text":"T"},{"kind":"text","text":") "},{"kind":"keyword","text":"async"},{"kind":"text","text":" "},{"kind":"keyword","text":"rethrows"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","text":"T"}],"url":"\/documentation\/gnustoengine\/propertycomputationtracker\/withtracking(_:perform:)","type":"topic","abstract":[{"type":"text","text":"Executes a computation within a tracked scope."}],"identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/PropertyComputationTracker\/withTracking(_:perform:)","kind":"symbol","title":"withTracking(_:perform:)","role":"symbol"},"doc://GnustoEngine/documentation/GnustoEngine/PropertyComputationTracker/activeComputations":{"title":"activeComputations","abstract":[{"type":"text","text":"Task-local storage for tracking active property computations across the call chain."}],"role":"symbol","fragments":[{"kind":"keyword","text":"static"},{"kind":"text","text":" "},{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"activeComputations"},{"kind":"text","text":": "},{"preciseIdentifier":"s:Sh","kind":"typeIdentifier","text":"Set"},{"kind":"text","text":"<"},{"preciseIdentifier":"s:SS","kind":"typeIdentifier","text":"String"},{"kind":"text","text":">"}],"type":"topic","identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/PropertyComputationTracker\/activeComputations","kind":"symbol","url":"\/documentation\/gnustoengine\/propertycomputationtracker\/activecomputations"},"doc://GnustoEngine/documentation/GnustoEngine/PropertyComputationTracker/key(for:property:)-4ltf1":{"fragments":[{"kind":"keyword","text":"static"},{"kind":"text","text":" "},{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"key"},{"kind":"text","text":"("},{"kind":"externalParam","text":"for"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"ItemID","preciseIdentifier":"s:12GnustoEngine6ItemIDV"},{"kind":"text","text":", "},{"kind":"externalParam","text":"property"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"ItemPropertyID","preciseIdentifier":"s:12GnustoEngine14ItemPropertyIDV"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"}],"url":"\/documentation\/gnustoengine\/propertycomputationtracker\/key(for:property:)-4ltf1","title":"key(for:property:)","type":"topic","kind":"symbol","role":"symbol","abstract":[{"type":"text","text":"Creates a unique computation key for an item property."}],"identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/PropertyComputationTracker\/key(for:property:)-4ltf1"},"doc://GnustoEngine/documentation/GnustoEngine/PropertyComputationTracker/$activeComputations":{"title":"$activeComputations","abstract":[],"role":"symbol","fragments":[{"kind":"keyword","text":"static"},{"kind":"text","text":" "},{"kind":"keyword","text":"let"},{"kind":"text","text":" "},{"kind":"identifier","text":"$activeComputations"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"TaskLocal","preciseIdentifier":"s:12_Concurrency9TaskLocalC"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"Set","preciseIdentifier":"s:Sh"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":">>"}],"type":"topic","identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/PropertyComputationTracker\/$activeComputations","kind":"symbol","url":"\/documentation\/gnustoengine\/propertycomputationtracker\/$activecomputations"},"doc://GnustoEngine/documentation/GnustoEngine/PropertyComputationTracker/key(for:property:)-88v2h":{"type":"topic","title":"key(for:property:)","identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/PropertyComputationTracker\/key(for:property:)-88v2h","abstract":[{"type":"text","text":"Creates a unique computation key for a location property."}],"fragments":[{"kind":"keyword","text":"static"},{"kind":"text","text":" "},{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"key"},{"kind":"text","text":"("},{"kind":"externalParam","text":"for"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"LocationID","preciseIdentifier":"s:12GnustoEngine10LocationIDV"},{"kind":"text","text":", "},{"kind":"externalParam","text":"property"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"LocationPropertyID","preciseIdentifier":"s:12GnustoEngine18LocationPropertyIDV"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"}],"url":"\/documentation\/gnustoengine\/propertycomputationtracker\/key(for:property:)-88v2h","role":"symbol","kind":"symbol"},"doc://GnustoEngine/documentation/GnustoEngine":{"type":"topic","url":"\/documentation\/gnustoengine","abstract":[],"kind":"symbol","identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine","title":"GnustoEngine","role":"collection"},"doc://GnustoEngine/documentation/GnustoEngine/PropertyComputationTracker":{"abstract":[{"type":"text","text":"Unified property computation tracking using task-local storage."}],"kind":"symbol","url":"\/documentation\/gnustoengine\/propertycomputationtracker","navigatorTitle":[{"text":"PropertyComputationTracker","kind":"identifier"}],"type":"topic","title":"PropertyComputationTracker","role":"symbol","identifier":"doc:\/\/GnustoEngine\/documentation\/GnustoEngine\/PropertyComputationTracker","fragments":[{"text":"enum","kind":"keyword"},{"text":" ","kind":"text"},{"text":"PropertyComputationTracker","kind":"identifier"}]}}}